#include <stdio.h>
#include <stdint.h>
#include <stdbool.h>
#include<math.h>
static uint32_t form_acc(float acceleration,bool axis);
static uint8_t CRC8(uint32_t SPI_data);
#define X 0
#define Y 1
#define CRC_POLY  0x12F
#define SPI_DATA_LEN_BITS 32
#define CRC_SPI_SEED 0xFF
#define CRC_LEN 8
#define MSG_LEN 32
#define CRC_SEED 0xFF
#define MAX_CRC 0xFF
#define MAX_UINT64_T 0xFFFFFFFFFFFFFFFF

//static uint32_t Side_25kmh_100_X_transformed[801]={0x840200E5,0x84014017,0x84014017,0x84000018,0x84000018,0x8400C01D,0x87FEC05E,0x8400C01D,0x87FEC05E,0x87FEC05E,0x84014017,0x8400C01D,0x8400C01D,0x87FF4054,0x87FF4054,0x87FF4054,0x87FF4054,0x8400C01D,0x84014017,0x84000018,0x87FF4054,0x87FF4054,0x87FF4054,0x87FE005B,0x8400C01D,0x8400C01D,0x8400C01D,0x8400C01D,0x8400C01D,0x84000018,0x84000018,0x84028006,0x8400C01D,0x84028006,0x84014017,0x87FF4054,0x8400C01D,0x840200E5,0x8400C01D,0x8400C01D,0x8400C01D,0x84014017,0x87FF4054,0x8400C01D,0x87FF4054,0x840200E5,0x8400C01D,0x87FF4054,0x84014017,0x84028006,0x840200E5,0x87FE005B,0x87FF4054,0x87FF4054,0x8400C01D,0x840340EA,0x87FEC05E,0x84000018,0x87FE005B,0x84000018,0x84000018,0x84000018,0x8400C01D,0x8400C01D,0x84000018,0x8400C01D,0x87FF4054,0x84014017,0x84000018,0x840200E5,0x84000018,0x84014017,0x84014017,0x840200E5,0x84000018,0x84014017,0x84014017,0x87FF4054,0x8400C01D,0x84000018,0x8400C01D,0x87FF4054,0x84014017,0x84014017,0x840200E5,0x87FEC05E,0x87FF4054,0x87FEC05E,0x840200E5,0x84014017,0x8400C01D,0x87FF4054,0x87FD80AC,0x87FF4054,0x87FF4054,0x87FF4054,0x8400C01D,0x87FEC05E,0x87FF4054,0x87FF4054,0x84000018,0x87FF4054,0x87FF4054,0x84000018,0x84014017,0x84014017,0x8400C01D,0x8400C01D,0x87FF4054,0x87FEC05E,0x84000018,0x87FEC05E,0x87FE005B,0x840200E5,0x84014017,0x87FF4054,0x84000018,0x87FF4054,0x84014017,0x87FEC05E,0x87FF4054,0x87FF4054,0x8400C01D,0x87FF4054,0x840200E5,0x8400C01D,0x84000018,0x87FF4054,0x84014017,0x84000018,0x84000018,0x84014017,0x84000018,0x84000018,0x84000018,0x8400C01D,0x87FF4054,0x84000018,0x87FF4054,0x8400C01D,0x8400C01D,0x87FF4054,0x84000018,0x84014017,0x840200E5,0x87FE005B,0x84014017,0x84000018,0x8400C01D,0x87FF4054,0x87FEC05E,0x8400C01D,0x84000018,0x840200E5,0x87FEC05E,0x84000018,0x87FF4054,0x8400C01D,0x84014017,0x87FF4054,0x84014017,0x84000018,0x87FE005B,0x87FD80AC,0x84000018,0x87FEC05E,0x840200E5,0x8400C01D,0x87FEC05E,0x87FF4054,0x84014017,0x8400C01D,0x84014017,0x87FF4054,0x87FEC05E,0x84014017,0x8400C01D,0x87FEC05E,0x87FEC05E,0x87FF4054,0x84014017,0x84000018,0x87FF4054,0x8400C01D,0x87FF4054,0x8400C01D,0x8400C01D,0x87FE005B,0x8400C01D,0x8400C01D,0x8400C01D,0x8400C01D,0x84000018,0x84000018,0x8400C01D,0x87FEC05E,0x8400C01D,0x84000018,0x87FF4054,0x87FF4054,0x84000018,0x84000018,0x84000018,0x87FF4054,0x84000018,0x84014017,0x8400C01D,0x84000018,0x84000018,0x87FCC0A3,0x84000018,0x87FEC05E,0x87FE005B,0x84000018,0x8400C01D,0x84014017,0x87FF4054,0x84014017,0x84014017,0x840200E5,0x87FF4054,0x84014017,0x84028006,0x840540C2,0x87FF4054,0x87F80073,0x8400C01D,0x8400C01D,0x8404802E,0x8405C021,0x87FEC05E,0x87FCC0A3,0x8400C01D,0x87FEC05E,0x87FD80AC,0x87FE005B,0x87FF4054,0x84028006,0x8400C01D,0x84028006,0x87FEC05E,0x87FCC0A3,0x8400C01D,0x8404802E,0x87FF4054,0x8405C021,0x8400C01D,0x87FEC05E,0x87FF4054,0x87FF4054,0x87FE005B,0x840340EA,0x87F80073,0x840F005C,0x87FF4054,0x87F98079,0x87FEC05E,0x840200E5,0x84014017,0x8400C01D,0x8400C01D,0x8404802E,0x84028006,0x87FE005B,0x84014017,0x840200E5,0x84014017,0x840540C2,0x87FF4054,0x8400C01D,0x8400C01D,0x87FE005B,0x84000018,0x87F98079,0x87F64038,0x87E5800C,0x87F5C0CF,0x87FCC0A3,0x840200E5,0x84028006,0x8405C021,0x8405C021,0x87FE005B,0x87FD80AC,0x87FCC0A3,0x84014017,0x87FEC05E,0x87F9009A,0x87FE005B,0x87FEC05E,0x84000018,0x840200E5,0x87FE005B,0x84000018,0x840200E5,0x840200E5,0x840540C2,0x840200E5,0x87FD80AC,0x87FE005B,0x840200E5,0x840400CD,0x84014017,0x87FE005B,0x87FE005B,0x84000018,0x87FF4054,0x87F80073,0x87FE005B,0x87FB8084,0x87FA4068,0x87F80073,0x87FD80AC,0x8400C01D,0x87FF4054,0x87FF4054,0x87FEC05E,0x87FEC05E,0x84000018,0x87FEC05E,0x84000018,0x87FF4054,0x840200E5,0x8400C01D,0x8400C01D,0x87FD80AC,0x8400C01D,0x87FCC0A3,0x8400C01D,0x87FCC0A3,0x87FD80AC,0x87F80073,0x87FB8084,0x87FEC05E,0x87FEC05E,0x87F9009A,0x87FF4054,0x87FCC0A3,0x87FCC0A3,0x87FD80AC,0x87FE005B,0x87FA4068,0x87F80073,0x87FD80AC,0x8400C01D,0x87FE005B,0x87FCC0A3,0x87FEC05E,0x87FE005B,0x87FE005B,0x8400C01D,0x87FD80AC,0x84000018,0x87FF4054,0x87FF4054,0x87F80073,0x87FEC05E,0x87FF4054,0x87FF4054,0x84000018,0x840200E5,0x84000018,0x84000018,0x84014017,0x84000018,0x8400C01D,0x84000018,0x87FEC05E,0x87FF4054,0x8400C01D,0x8400C01D,0x84014017,0x8400C01D,0x840200E5,0x84014017,0x8400C01D,0x8404802E,0x84000018,0x87FE005B,0x8400C01D,0x84014017,0x87FCC0A3,0x84028006,0x87FF4054,0x8400C01D,0x87FEC05E,0x84014017,0x87FE005B,0x87FF4054,0x87FF4054,0x84014017,0x840200E5,0x87FF4054,0x87FEC05E,0x87FEC05E,0x87FF4054,0x87FF4054,0x84000018,0x84000018,0x8400C01D,0x87FD80AC,0x87FF4054,0x840200E5,0x841540E7,0x841D0084,0x840200E5,0x84014017,0x841040DB,0x841380CA,0x87FAC08B,0x87F5C0CF,0x87F70037,0x87F80073,0x87F9009A,0x84028006,0x84014017,0x87F80073,0x87FE005B,0x8400C01D,0x8400C01D,0x8404802E,0x840680D3,0x84014017,0x8400C01D,0x87FB8084,0x840200E5,0x87FF4054,0x84000018,0x87FF4054,0x87FEC05E,0x87FF4054,0x84000018,0x84014017,0x8400C01D,0x87FD80AC,0x87FEC05E,0x87FF4054,0x84000018,0x8400C01D,0x87FAC08B,0x87FEC05E,0x87F70037,0x87FE005B,0x87FEC05E,0x87F80073,0x8400C01D,0x840200E5,0x87FE005B,0x84014017,0x840200E5,0x87FD80AC,0x840200E5,0x87FD80AC,0x87FEC05E,0x84014017,0x84000018,0x84028006,0x87FD80AC,0x87FF4054,0x8404802E,0x8400C01D,0x84000018,0x84014017,0x840400CD,0x87FF4054,0x84014017,0x8400C01D,0x87FCC0A3,0x84014017,0x87FF4054,0x87FCC0A3,0x87FF4054,0x87FD80AC,0x87FE005B,0x84000018,0x87FF4054,0x87FE005B,0x87FCC0A3,0x84000018,0x84000018,0x8400C01D,0x84000018,0x87FD80AC,0x87FE005B,0x87FE005B,0x87F80073,0x87FEC05E,0x84000018,0x87FD80AC,0x84000018,0x8400C01D,0x87FF4054,0x8400C01D,0x87FF4054,0x84000018,0x840200E5,0x84000018,0x87FEC05E,0x84014017,0x8400C01D,0x87FF4054,0x84014017,0x8400C01D,0x84000018,0x84014017,0x87FEC05E,0x87FF4054,0x84000018,0x8400C01D,0x87FF4054,0x84014017,0x8400C01D,0x87FF4054,0x8400C01D,0x87FEC05E,0x87FD80AC,0x84028006,0x840200E5,0x84014017,0x840200E5,0x8400C01D,0x87FEC05E,0x87FEC05E,0x8400C01D,0x84000018,0x87FEC05E,0x8400C01D,0x84000018,0x87FEC05E,0x84014017,0x87FF4054,0x87FF4054,0x84000018,0x84000018,0x84000018,0x84000018,0x84014017,0x84000018,0x84000018,0x84000018,0x840400CD,0x87FF4054,0x84014017,0x8400C01D,0x840200E5,0x84000018,0x8400C01D,0x84014017,0x8400C01D,0x87FEC05E,0x87FF4054,0x8400C01D,0x84000018,0x8400C01D,0x84014017,0x84000018,0x87FF4054,0x87FF4054,0x87FEC05E,0x84000018,0x84000018,0x8400C01D,0x87FEC05E,0x8400C01D,0x87FF4054,0x87FEC05E,0x84000018,0x87FD80AC,0x84000018,0x87FF4054,0x87FD80AC,0x8400C01D,0x8400C01D,0x87FF4054,0x87FE005B,0x84000018,0x8400C01D,0x87FEC05E,0x87FF4054,0x84000018,0x84000018,0x87FE005B,0x87FEC05E,0x87FD80AC,0x87FEC05E,0x87FE005B,0x87FEC05E,0x87FF4054,0x87FD80AC,0x87FEC05E,0x87FEC05E,0x87FF4054,0x87FF4054,0x87FF4054,0x87FF4054,0x8400C01D,0x87FF4054,0x87FF4054,0x87FE005B,0x84000018,0x87FF4054,0x87FE005B,0x84014017,0x87FEC05E,0x87FD80AC,0x87FF4054,0x84000018,0x87FCC0A3,0x87FD80AC,0x84000018,0x87FF4054,0x87FF4054,0x87FE005B,0x87FEC05E,0x87FEC05E,0x84000018,0x87FF4054,0x8400C01D,0x84000018,0x8400C01D,0x84000018,0x87FEC05E,0x87FF4054,0x87FF4054,0x87FF4054,0x84000018,0x87FE005B,0x8400C01D,0x87FF4054,0x8400C01D,0x87FD80AC,0x87FEC05E,0x87FF4054,0x87FE005B,0x84000018,0x87FD80AC,0x84000018,0x87FEC05E,0x8400C01D,0x87FEC05E,0x87FF4054,0x87FD80AC,0x8400C01D,0x87FE005B,0x87FE005B,0x87FEC05E,0x87FE005B,0x8400C01D,0x87FF4054,0x84000018,0x87FEC05E,0x87FF4054,0x87FEC05E,0x87FEC05E,0x87FF4054,0x8400C01D,0x8400C01D,0x87FE005B,0x84000018,0x87FF4054,0x8400C01D,0x87FE005B,0x87FF4054,0x84000018,0x8400C01D,0x87FEC05E,0x87FEC05E,0x87FF4054,0x84000018,0x8400C01D,0x87FF4054,0x87FEC05E,0x84000018,0x84000018,0x87FF4054,0x87FF4054,0x84000018,0x84014017,0x84000018,0x87FE005B,0x87FD80AC,0x84000018,0x87FD80AC,0x87FE005B,0x87FEC05E,0x8400C01D,0x8400C01D,0x8400C01D,0x84000018,0x87FEC05E,0x8400C01D,0x84000018,0x8400C01D,0x840200E5,0x8400C01D,0x87FF4054,0x84014017,0x84014017,0x84000018,0x84000018,0x8400C01D,0x8400C01D,0x84014017,0x8400C01D,0x84000018,0x8400C01D,0x84000018,0x840200E5,0x84000018,0x84000018,0x87FEC05E,0x87FEC05E,0x87FEC05E,0x87FEC05E,0x8400C01D,0x87FEC05E,0x87FF4054,0x840200E5,0x87FF4054,0x8400C01D,0x87FE005B,0x84000018,0x87FEC05E,0x87FE005B,0x87FE005B,0x8400C01D,0x87FEC05E,0x87FE005B,0x84000018,0x84000018,0x87FE005B,0x8400C01D,0x87FE005B,0x87FF4054,0x84000018,0x84000018,0x84014017,0x84014017,0x840340EA,0x8400C01D,0x84000018,0x8400C01D,0x87FF4054,0x84014017,0x84000018,0x84014017,0x87FEC05E,0x84000018,0x87FF4054,0x84000018,0x84000018,0x87FF4054,0x84000018,0x87FF4054,0x87FF4054,0x87FE005B,0x87FEC05E,0x87FF4054,0x84014017,0x87FF4054,0x87FEC05E,0x87FF4054,0x840200E5,0x87FF4054,0x87FF4054,0x84014017,0x84014017,0x87FE005B,0x8400C01D,0x87FF4054,0x84000018,0x87FEC05E,0x87FF4054,0x8400C01D,0x84014017,0x84000018,0x87FEC05E,0x87FF4054,0x87FEC05E,0x87FEC05E,0x87FD80AC,0x84000018,0x87FF4054,0x84014017,0x87FEC05E,0x84014017,0x8400C01D,0x84000018,0x84000018,0x840200E5,0x84000018,0x84014017,0x84000018,0x8400C01D,0x84000018,0x8400C01D,0x87FF4054,0x87FEC05E,0x87FE005B,0x84000018,0x87FF4054};
//static uint32_t Side_25kmh_100_Y_transformed[801]={0xA401C01B,0xA40140F8,0xA4008014,0xA7FF80BE,0xA40140F8,0xA401C01B,0xA401C01B,0xA7FEC0B1,0xA40280E9,0xA4008014,0xA7FF80BE,0xA40000F7,0xA7FF80BE,0xA7FF80BE,0xA401C01B,0xA4008014,0xA40140F8,0xA7FF80BE,0xA7FEC0B1,0xA7FF80BE,0xA4008014,0xA40140F8,0xA40000F7,0xA4008014,0xA7FF80BE,0xA40000F7,0xA4008014,0xA401C01B,0xA4008014,0xA40140F8,0xA40140F8,0xA7FF80BE,0xA4008014,0xA401C01B,0xA4008014,0xA4008014,0xA40000F7,0xA401C01B,0xA40140F8,0xA40000F7,0xA40000F7,0xA40000F7,0xA7FF80BE,0xA7FF80BE,0xA40140F8,0xA40140F8,0xA40140F8,0xA40140F8,0xA40140F8,0xA401C01B,0xA40140F8,0xA4008014,0xA4008014,0xA40280E9,0xA40000F7,0xA40000F7,0xA40000F7,0xA4008014,0xA40000F7,0xA40000F7,0xA40140F8,0xA4008014,0xA40140F8,0xA4008014,0xA40000F7,0xA4008014,0xA4008014,0xA7FF80BE,0xA40140F8,0xA40000F7,0xA40140F8,0xA7FF80BE,0xA40000F7,0xA4008014,0xA40280E9,0xA4008014,0xA7FF80BE,0xA40000F7,0xA40140F8,0xA401C01B,0xA4008014,0xA40280E9,0xA4008014,0xA7FEC0B1,0xA7FF80BE,0xA4008014,0xA40000F7,0xA40000F7,0xA40000F7,0xA40000F7,0xA7FF80BE,0xA7FF80BE,0xA40000F7,0xA401C01B,0xA7FF80BE,0xA40000F7,0xA4008014,0xA401C01B,0xA7FE4052,0xA401C01B,0xA4008014,0xA401C01B,0xA7FD8043,0xA7FE4052,0xA7FF80BE,0xA40000F7,0xA40000F7,0xA7FEC0B1,0xA40140F8,0xA7FEC0B1,0xA4008014,0xA40140F8,0xA40000F7,0xA4008014,0xA40000F7,0xA7FF80BE,0xA7FEC0B1,0xA4008014,0xA40000F7,0xA40000F7,0xA4008014,0xA40140F8,0xA7FF80BE,0xA40140F8,0xA7FF80BE,0xA7FEC0B1,0xA7FF80BE,0xA40000F7,0xA4008014,0xA7FF80BE,0xA7FF80BE,0xA7FF80BE,0xA40000F7,0xA7FE4052,0xA7FF80BE,0xA401C01B,0xA40000F7,0xA4008014,0xA401C01B,0xA7FF80BE,0xA40280E9,0xA40300E3,0xA4008014,0xA7FF80BE,0xA40000F7,0xA40140F8,0xA40000F7,0xA40000F7,0xA40140F8,0xA40140F8,0xA40140F8,0xA40140F8,0xA7FF80BE,0xA40000F7,0xA40140F8,0xA40000F7,0xA7FEC0B1,0xA7FF80BE,0xA4008014,0xA4008014,0xA7FF80BE,0xA40000F7,0xA4008014,0xA7FE4052,0xA40000F7,0xA401C01B,0xA4008014,0xA7FF80BE,0xA40000F7,0xA7FEC0B1,0xA401C01B,0xA4008014,0xA40140F8,0xA40140F8,0xA40000F7,0xA7FF80BE,0xA7FF80BE,0xA401C01B,0xA40140F8,0xA401C01B,0xA40000F7,0xA40140F8,0xA4008014,0xA4008014,0xA40280E9,0xA401C01B,0xA7FD00A0,0xA40000F7,0xA4008014,0xA4008014,0xA40000F7,0xA40000F7,0xA40000F7,0xA40000F7,0xA40000F7,0xA7FF80BE,0xA40000F7,0xA40000F7,0xA7FF80BE,0xA40140F8,0xA401C01B,0xA40140F8,0xA4008014,0xA40140F8,0xA7FEC0B1,0xA40140F8,0xA7FF80BE,0xA40280E9,0xA7FF80BE,0xA7FEC0B1,0xA7FD8043,0xA7FA0061,0xA7F700D8,0xA7F400CC,0xA7F18013,0xA7F200E4,0xA7F18013,0xA7F640D7,0xA7F94093,0xA7F400CC,0xA7F3C008,0xA7F2C0E1,0xA7EDC080,0xA7E800B9,0xA7F50025,0xA7F4802F,0xA7FA0061,0xA7F700D8,0xA7FD8043,0xA7FC40AF,0xA7F4802F,0xA7F18013,0xA7ED4063,0xA7F040FF,0xA7F0C01C,0xA7EC808F,0xA7F3C008,0xA7FA0061,0xA7F8C099,0xA7F18013,0xA7EC808F,0xA7E60014,0xA7E380CB,0xA7EF0078,0xA7F5C020,0xA7F94093,0xA7E540E6,0xA7E540E6,0xA7E800B9,0xA7FC40AF,0xA7F4802F,0xA7E800B9,0xA7E980B3,0xA7EE8072,0xA7F2C0E1,0xA7EF809B,0xA7EC808F,0xA7E4C0EC,0xA7EF0078,0xA7E980B3,0xA7EE8072,0xA7F18013,0xA7E90050,0xA7EAC041,0xA7EB404B,0xA7E680F7,0xA7EE8072,0xA7E60014,0xA7F040FF,0xA7EF809B,0xA7F040FF,0xA7E680F7,0xA7E7C0F8,0xA7E680F7,0xA7EA40A2,0xA7EF0078,0xA7F18013,0xA7F18013,0xA7EE8072,0xA7F2C0E1,0xA7EE8072,0xA7E800B9,0xA7DFC012,0xA7D88035,0xA7F5C020,0xA7F18013,0xA7F3C008,0xA7EC808F,0xA7DD8009,0xA7EF0078,0xA7ED4063,0xA7F200E4,0xA7EA40A2,0xA7EF0078,0xA7E980B3,0xA7EDC080,0xA7EE8072,0xA7E7C0F8,0xA7E800B9,0xA7EF809B,0xA7F040FF,0xA7E90050,0xA7E980B3,0xA7E7401B,0xA7E980B3,0xA7E980B3,0xA7E8405F,0xA7ED4063,0xA7EA40A2,0xA7E8405F,0xA7E8405F,0xA7E90050,0xA7E980B3,0xA7E800B9,0xA7E680F7,0xA7EA40A2,0xA7E800B9,0xA7EF0078,0xA7F040FF,0xA7F18013,0xA7F18013,0xA7F2C0E1,0xA7F3C008,0xA7F200E4,0xA7F200E4,0xA7F640D7,0xA7F640D7,0xA7F5C020,0xA7F700D8,0xA7F7803B,0xA7F7803B,0xA7F700D8,0xA7F640D7,0xA7F8C099,0xA7FBC08D,0xA7F700D8,0xA7FA0061,0xA7F400CC,0xA7FD00A0,0xA7FD00A0,0xA7F50025,0xA7FB406E,0xA7F7803B,0xA7FE4052,0xA7FA0061,0xA7FEC0B1,0xA7FD00A0,0xA7FC40AF,0xA40280E9,0xA7FEC0B1,0xA7FD8043,0xA7FEC0B1,0xA7FD8043,0xA7FE4052,0xA40000F7,0xA7FF80BE,0xA4008014,0xA40000F7,0xA40300E3,0xA40140F8,0xA7FF80BE,0xA4008014,0xA401C01B,0xA401C01B,0xA40440C4,0xA401C01B,0xA40280E9,0xA4058028,0xA404C027,0xA4058028,0xA404C027,0xA40440C4,0xA404C027,0xA40280E9,0xA404C027,0xA7FEC0B1,0xA40A4069,0xA40440C4,0xA4088091,0xA406C0DA,0xA409009B,0xA40B0066,0xA403C0E6,0xA40740D0,0xA4058028,0xA4080072,0xA40600DF,0xA4080072,0xA406C0DA,0xA40440C4,0xA404C027,0xA404C027,0xA401C01B,0xA40440C4,0xA404C027,0xA4058028,0xA403C0E6,0xA40440C4,0xA406C0DA,0xA40600DF,0xA4080072,0xA7EC808F,0xA7DB8021,0xA7E540E6,0xA403C0E6,0xA414C002,0xA7FD8043,0xA7FA0061,0xA40CC0A2,0xA40E005A,0xA7FA0061,0xA4058028,0xA4080072,0xA4008014,0xA40280E9,0xA4088091,0xA40440C4,0xA40140F8,0xA7FB406E,0xA7FEC0B1,0xA404C027,0xA40C4041,0xA40B8085,0xA406C0DA,0xA40600DF,0xA40300E3,0xA409009B,0xA40CC0A2,0xA404C027,0xA4058028,0xA406C0DA,0xA409C09E,0xA406C0DA,0xA403C0E6,0xA4058028,0xA40600DF,0xA406C0DA,0xA40300E3,0xA40140F8,0xA403C0E6,0xA403C0E6,0xA401C01B,0xA409009B,0xA40600DF,0xA40300E3,0xA40600DF,0xA7FB406E,0xA406C0DA,0xA40000F7,0xA40140F8,0xA403C0E6,0xA7FF80BE,0xA403C0E6,0xA7FF80BE,0xA406C0DA,0xA4008014,0xA403C0E6,0xA40280E9,0xA7FEC0B1,0xA40140F8,0xA40000F7,0xA7FE4052,0xA7FE4052,0xA7FE4052,0xA7FEC0B1,0xA40000F7,0xA40000F7,0xA40140F8,0xA7FEC0B1,0xA40140F8,0xA40300E3,0xA40280E9,0xA40140F8,0xA40280E9,0xA401C01B,0xA40000F7,0xA404C027,0xA403C0E6,0xA4058028,0xA4058028,0xA401C01B,0xA40440C4,0xA40440C4,0xA40300E3,0xA4058028,0xA40600DF,0xA406C0DA,0xA4058028,0xA40440C4,0xA404C027,0xA40300E3,0xA40300E3,0xA404C027,0xA40440C4,0xA40300E3,0xA401C01B,0xA403C0E6,0xA40280E9,0xA401C01B,0xA40440C4,0xA40440C4,0xA40440C4,0xA40300E3,0xA4058028,0xA40300E3,0xA401C01B,0xA40440C4,0xA403C0E6,0xA4058028,0xA4058028,0xA403C0E6,0xA401C01B,0xA401C01B,0xA40440C4,0xA403C0E6,0xA4058028,0xA40280E9,0xA403C0E6,0xA401C01B,0xA40300E3,0xA403C0E6,0xA404C027,0xA404C027,0xA40440C4,0xA40440C4,0xA40300E3,0xA401C01B,0xA40440C4,0xA40300E3,0xA403C0E6,0xA40300E3,0xA40280E9,0xA403C0E6,0xA403C0E6,0xA40440C4,0xA4058028,0xA4058028,0xA40300E3,0xA401C01B,0xA40440C4,0xA40300E3,0xA40280E9,0xA403C0E6,0xA406C0DA,0xA403C0E6,0xA401C01B,0xA40440C4,0xA40300E3,0xA40600DF,0xA404C027,0xA404C027,0xA40440C4,0xA403C0E6,0xA40440C4,0xA40440C4,0xA40300E3,0xA404C027,0xA40300E3,0xA4058028,0xA404C027,0xA4058028,0xA40740D0,0xA403C0E6,0xA40300E3,0xA403C0E6,0xA40440C4,0xA403C0E6,0xA40300E3,0xA40440C4,0xA40280E9,0xA404C027,0xA401C01B,0xA40300E3,0xA404C027,0xA404C027,0xA40440C4,0xA40440C4,0xA40440C4,0xA40600DF,0xA403C0E6,0xA40300E3,0xA40440C4,0xA40440C4,0xA40440C4,0xA4058028,0xA40280E9,0xA40440C4,0xA40440C4,0xA404C027,0xA40440C4,0xA404C027,0xA404C027,0xA40440C4,0xA40440C4,0xA403C0E6,0xA40440C4,0xA40440C4,0xA40440C4,0xA403C0E6,0xA404C027,0xA40300E3,0xA403C0E6,0xA40440C4,0xA4058028,0xA40440C4,0xA4058028,0xA403C0E6,0xA40440C4,0xA403C0E6,0xA403C0E6,0xA40300E3,0xA40440C4,0xA40280E9,0xA40440C4,0xA403C0E6,0xA40280E9,0xA403C0E6,0xA40300E3,0xA40440C4,0xA40300E3,0xA40300E3,0xA404C027,0xA40280E9,0xA40300E3,0xA40300E3,0xA40280E9,0xA403C0E6,0xA403C0E6,0xA40440C4,0xA401C01B,0xA40140F8,0xA401C01B,0xA40300E3,0xA40000F7,0xA40280E9,0xA401C01B,0xA40280E9,0xA4008014,0xA403C0E6,0xA403C0E6,0xA40280E9,0xA403C0E6,0xA40300E3,0xA403C0E6,0xA40300E3,0xA40140F8,0xA401C01B,0xA40440C4,0xA40280E9,0xA40300E3,0xA403C0E6,0xA40280E9,0xA403C0E6,0xA40280E9,0xA403C0E6,0xA40300E3,0xA403C0E6,0xA40300E3,0xA40440C4,0xA40440C4,0xA40280E9,0xA403C0E6,0xA40300E3,0xA401C01B,0xA40440C4,0xA403C0E6,0xA403C0E6,0xA403C0E6,0xA403C0E6,0xA401C01B,0xA40300E3,0xA403C0E6,0xA40280E9,0xA40140F8,0xA40300E3,0xA401C01B,0xA40140F8,0xA7FF80BE,0xA40140F8,0xA40280E9,0xA403C0E6,0xA401C01B,0xA401C01B,0xA40300E3,0xA4008014,0xA401C01B,0xA40140F8,0xA40140F8,0xA401C01B,0xA4008014,0xA403C0E6,0xA40140F8,0xA40300E3,0xA4008014,0xA40280E9,0xA4008014,0xA4008014,0xA7FEC0B1,0xA40000F7,0xA40140F8,0xA40140F8,0xA40140F8,0xA401C01B,0xA7FE4052,0xA40000F7,0xA7FE4052,0xA7FF80BE,0xA4008014,0xA40140F8,0xA401C01B,0xA40280E9,0xA40280E9,0xA40280E9,0xA7FEC0B1,0xA403C0E6,0xA7FE4052,0xA40440C4,0xA40000F7,0xA40140F8,0xA7FF80BE,0xA7FEC0B1,0xA401C01B,0xA40300E3,0xA7FF80BE,0xA401C01B,0xA4008014,0xA401C01B,0xA40140F8,0xA4008014,0xA40140F8,0xA40000F7,0xA4008014,0xA40000F7,0xA4008014,0xA4008014,0xA40000F7,0xA4008014,0xA401C01B,0xA4008014,0xA401C01B,0xA40000F7,0xA401C01B,0xA401C01B,0xA4008014,0xA40000F7,0xA40000F7,0xA40140F8,0xA401C01B,0xA401C01B,0xA40140F8,0xA40280E9,0xA40140F8,0xA40140F8,0xA40140F8,0xA40000F7,0xA40300E3,0xA401C01B,0xA40300E3,0xA40280E9,0xA40140F8,0xA40140F8,0xA4008014,0xA40300E3,0xA40300E3,0xA401C01B,0xA40140F8,0xA401C01B,0xA40280E9,0xA40000F7,0xA4008014,0xA40140F8,0xA4008014,0xA40280E9,0xA401C01B,0xA4008014,0xA40140F8,0xA40280E9,0xA40140F8,0xA40140F8,0xA40140F8,0xA7FF80BE,0xA40140F8,0xA401C01B,0xA401C01B,0xA40140F8,0xA40000F7,0xA40140F8,0xA40000F7,0xA401C01B,0xA40280E9,0xA40140F8,0xA401C01B,0xA401C01B,0xA40140F8,0xA40140F8,0xA40140F8,0xA4008014,0xA403C0E6,0xA4008014,0xA7FF80BE,0xA401C01B};
uint8_t SPI_resp[4]={0,0,0,0};
uint32_t *acceleration_X_ptr,*acceleration_Y_ptr;
/*int main(void)
{
    float acceleration=1.1;
    uint32_t acc;
    char * filename = "Side_25kmh_100_Y_transformed.txt";

    FILE *fp = fopen(filename, "w");
    uint32_t message;
    if(fp)
    {
        for(uint16_t i=0;i<801;i++)
        {
            message=form_acc(Side_25kmh_100_Y[i],Y);
            fprintf(fp,"0x%X,",message);
            printf("0x%X\n",message);
        }
        fclose(fp);
        printf("File has been written\n");
    }
    acceleration_X_ptr=Side_25kmh_100_X_transformed;
    acceleration_Y_ptr=Side_25kmh_100_Y_transformed;
    return 0;
}*/
static uint32_t form_acc(float acceleration,bool axis)
{
	uint8_t valH0,valL0,valL,valH,B0,B1,B2,B3;
	int16_t acc_val=round(20.47f*acceleration);
	uint32_t formed_acceleration;
	uint8_t RCOMMAND0x00=0b10000100;
    uint8_t RCOMMAND0x02=0b10100100;
	uint8_t RCOMMAND;
	if(acc_val>=0)
	     {
          valL0 = (uint8_t) ((acc_val<<4) & 0x00ff);
          valH0 = (uint8_t) (((acc_val<<4) & 0xff00) >> 8);
          valL=valL0;
          valH=valH0;
	     }
	     else
	     {
          valL0 = (uint8_t) (((-acc_val)<<4) & 0x00ff);
          valH0 = (uint8_t) (((((-acc_val)<<4) & 0xff00) >> 8));
          valL=~valL0+1;
          valH=~valH0;
	     }
  if(axis==X) RCOMMAND=RCOMMAND0x00;
  else RCOMMAND=RCOMMAND0x02;
  B0=(RCOMMAND|(valH>>6));
  B1=((valH<<2)|(valL>>6));
  B2=(valL<<2);
  B3=CRC8((((uint32_t)B0)<<24)|(((uint32_t)B1)<<16)|(((uint32_t)B2)<<8));
	formed_acceleration=(((uint32_t)B0)<<24)|(((uint32_t)B1)<<16)|(((uint32_t)B2)<<8)|((uint32_t)B3);
	return formed_acceleration;
}
static uint8_t CRC8(uint32_t SPI_data)
{
	uint64_t mask = MAX_UINT64_T - MAX_CRC;
	uint64_t rem = (uint64_t)((((uint64_t)SPI_data) | (((uint64_t)CRC_SEED) << MSG_LEN)) & mask);
	uint64_t divider = ((uint64_t)CRC_POLY) << (MSG_LEN - 1);

	for (uint16_t i = MSG_LEN + CRC_LEN; i > 0; i--) //32 = 4*8
	{
		if (((rem >> (i - 1)) & 0x01) != 0)
		{
			rem ^= divider;
		}
		divider >>= 1;
		if ((rem & mask) == 0) //end of calc
		{
			break;
		}
	}
	// Return 8-bit CRC calculated
	return (uint8_t)(rem & MAX_CRC);
}
